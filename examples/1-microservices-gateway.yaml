server:
  host: "0.0.0.0"
  port: "8080"
  tls: false

backends:
  - id: "users-service"
    servers:
      - "http://users-service:3001"
      - "http://users-service-backup:3001"
    health_check:
      enabled: true
      interval: "30s"
      timeout: "5s"
      path: "/health"
    load_balancing: "round-robin"
  - id: "orders-service"
    servers:
      - "http://orders-service:3002"
    health_check:
      enabled: true
      interval: "30s"
      timeout: "5s"
      path: "/health"
  - id: "products-service"
    servers:
      - "http://products-service:3003"
    health_check:
      enabled: true
      interval: "30s"
      timeout: "5s"
      path: "/health"

routes:
  - name: "users-api"
    path_prefix: "/users"
    backend_id: "users-service"
    priority: 10
  - name: "orders-api"
    path_prefix: "/orders"
    backend_id: "orders-service"
    priority: 10
  - name: "products-api"
    path_prefix: "/products"
    backend_id: "products-service"
    priority: 10

policies:
  rate_limit:
    enabled: true
    max_requests: 1000
    window: "1m"
  cors:
    enabled: true
    allowed_origins:
      - "*"
  auth:
    enabled: true
    type: "jwt"
    secret: "your-secret-key"
  cache:
    enabled: true
    ttl: "5m"
    methods:
      - "GET"
      - "HEAD"
