server:
  host: "0.0.0.0"
  port: "8080"
  tls: false

backends:
  - id: "jenkins"
    servers:
      - "http://jenkins:8080"
    health_check:
      enabled: true
      interval: "30s"
      timeout: "5s"
  - id: "grafana"
    servers:
      - "http://grafana:3000"
    health_check:
      enabled: true
      interval: "30s"
      timeout: "5s"
  - id: "admin-panel"
    servers:
      - "http://admin-panel:5000"
    health_check:
      enabled: true
      interval: "30s"
      timeout: "5s"
  - id: "confluence"
    servers:
      - "http://confluence:8090"
    health_check:
      enabled: true
      interval: "30s"
      timeout: "5s"

routes:
  - name: "jenkins-route"
    path_prefix: "/jenkins"
    backend_id: "jenkins"
    priority: 10
  - name: "grafana-route"
    path_prefix: "/grafana"
    backend_id: "grafana"
    priority: 10
  - name: "admin-route"
    path_prefix: "/admin"
    backend_id: "admin-panel"
    priority: 10
  - name: "docs-route"
    path_prefix: "/docs"
    backend_id: "confluence"
    priority: 10

policies:
  rate_limit:
    enabled: true
    max_requests: 1000
    window: "1m"
  cors:
    enabled: true
    allowed_origins:
      - "https://company-intranet.internal"
  auth:
    enabled: true
    type: "oauth"
    secret: "oauth-secret"
  cache:
    enabled: true
    ttl: "10m"
    methods:
      - "GET"
